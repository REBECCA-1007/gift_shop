<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elegant Gift Shop — Wedding • Birthday • Christmas • Summer</title>
  <meta name="description" content="Premium mini gifts: Wedding, Birthday, Christmas, Summer — boutique, elegant, artistic." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
  <!-- Boutique styles with paper texture, gold, cards, etc. -->
  <link rel="stylesheet" href="assets/styles.css">

  <!-- Hero seasonal backgrounds (không ảnh hưởng nền giấy toàn trang) -->
  <style>
    body.season-wedding  .hero{
      color:#2b3a55;
      background:
        linear-gradient(135deg, rgba(238,201,210,.32), rgba(255,255,255,.92)),
        url('assets/images/wedding/wedding-candle.jpg') center/cover no-repeat;
      text-shadow:0 1px 12px rgba(0,0,0,.15);
    }
    body.season-birthday .hero{
      color:#2b3a55;
      background:
        linear-gradient(135deg, rgba(255,221,170,.32), rgba(255,255,255,.92)),
        url('assets/images/birthday/birthday-box.jpg') center/cover no-repeat;
      text-shadow:0 1px 12px rgba(0,0,0,.15);
    }
    body.season-christmas .hero{
      color:#102418;
      background:
        linear-gradient(135deg, rgba(30,86,49,.32), rgba(255,255,255,.92)),
        url('assets/images/christmas/christmas2.jpg') center/cover no-repeat;
      text-shadow:0 1px 12px rgba(0,0,0,.18);
    }
    body.season-summer   .hero{
      color:#0f2742;
      background:
        linear-gradient(135deg, rgba(46,139,139,.30), rgba(255,255,255,.92)),
        url('assets/images/summer/beach-day.jpg') center/cover no-repeat;
      text-shadow:0 1px 12px rgba(0,0,0,.15);
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="container nav">
      <a class="brand" href="#">
        <div class="logo">G</div>
        <div>Elegant Gift Shop</div>
      </a>

      <nav class="menu">
        <a href="#wedding">Wedding</a>
        <a href="#birthday">Birthday</a>
        <a href="#christmas">Christmas</a>
        <a href="#summer">Summer</a>
      </nav>

      <!-- Brand theme: Romantic / Classic -->
      <div class="tools">
        <button class="chip" data-theme="romantic" title="Romantic Wedding">Romantic</button>
        <button class="chip" data-theme="classic"  title="Classic Luxury">Classic</button>
        <a class="chip" href="cart.html" aria-label="Cart">Cart <span id="cart-count">0</span></a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="container">
    <section class="hero" id="hero">
      <div>
        <h1 id="hero-title">Premium Mini Gifts for Every Elegant Moment</h1>
        <p class="lead" id="hero-sub">Wedding • Birthday • Christmas • Summer — curated sets, boutique packaging.</p>
        <div style="display:flex; gap:12px; flex-wrap:wrap">
          <a class="btn btn-primary" href="collections.html">Shop Collections</a>
          <a class="btn btn-outline" href="collections.html">Custom & Wedding</a>
        </div>

        <div class="features" style="margin-top:26px">
          <div class="feature"><div class="dot"></div><div>
            <div style="font-weight:700">Design-first</div>
            <div style="color:var(--muted)">Elegant, photogenic packaging</div>
          </div></div>
          <div class="feature"><div class="dot"></div><div>
            <div style="font-weight:700">Ready-to-gift</div>
            <div style="color:var(--muted)">Cards & wrap included</div>
          </div></div>
          <div class="feature"><div class="dot"></div><div>
            <div style="font-weight:700">Fast ship</div>
            <div style="color:var(--muted)">48–72h nationwide</div>
          </div></div>
          <div class="feature"><div class="dot"></div><div>
            <div style="font-weight:700">Bulk friendly</div>
            <div style="color:var(--muted)">Wedding & corporate pricing</div>
          </div></div>
        </div>
      </div>

      <div>
        <div class="banner ornate">
          <div style="position:relative;">
            <span class="ribbon">Live Palette</span>
            <img src="assets/images/wedding/wedding-candle.jpg" alt="Elegant gift boxes on a table">
          </div>
          <div class="bar">
            <div class="swatch" id="sw1"></div>
            <div class="swatch" id="sw2"></div>
            <div class="swatch" id="sw3"></div>
            <span style="font-weight:600;color:var(--fg)">Romantic ↔ Classic</span>
          </div>
        </div>
      </div>
    </section>

    <!-- FILTER -->
    <section class="section">
      <h2>Signature Collections</h2>
      <p class="lead">Chọn chủ đề để xem đúng vibe & banner hero.</p>
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:16px" class="filter">
        <button class="chip filter active" data-cat="All">All</button>
        <button class="chip filter" data-cat="Wedding">Wedding</button>
        <button class="chip filter" data-cat="Birthday">Birthday</button>
        <button class="chip filter" data-cat="Christmas">Christmas</button>
        <button class="chip filter" data-cat="Summer">Summer</button>
      </div>

      <!-- PRODUCT GRID -->
      <div id="grid-all" class="grid"></div>
    </section>

    <!-- CUSTOM BANNER -->
    <section class="section" id="custom">
      <div class="banner ornate">
        <img src="assets/images/christmas/christmas2.jpg" alt="Boutique ribbon and stationery">
        <div class="bar">
          <div style="font-weight:700; color:var(--brand);">Need custom wedding or corporate gifts?</div>
          <a class="btn btn-primary" href="collections.html">Get a Quote</a>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="wrap container">
      <div>© <span id="y"></span> Elegant Gift Shop — <em>“Gifts are the flowers of memory.”</em></div>
      <div style="display:flex; gap:10px">
        <a class="badge" href="#">Instagram</a>
        <a class="badge" href="#">Facebook</a>
        <a class="badge" href="#">Etsy</a>
      </div>
    </div>
    <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
  </footer>

<!-- SCRIPTS -->
<script src="assets/products.js"></script>
<script>
  /* ===== Helpers ===== */
  const $ = (s,ctx=document)=>ctx.querySelector(s);
  const $$ = (s,ctx=document)=>Array.from(ctx.querySelectorAll(s));

  /* ===== Brand theme toggle (Romantic / Classic) ===== */
  function setTheme(name){
    document.documentElement.classList.remove('theme-romantic','theme-classic');
    var theme = name || localStorage.getItem('gift_theme') || 'theme-classic';
    document.documentElement.classList.add(theme);
    localStorage.setItem('gift_theme', theme);

    // update chip states + swatches
    $$('.tools .chip[data-theme]').forEach(function(c){
      c.classList.toggle('active', 'theme-'+c.dataset.theme===theme);
    });
    var styles = getComputedStyle(document.documentElement);
    var gold = styles.getPropertyValue('--gold').trim();
    var accent = styles.getPropertyValue('--accent').trim();
    var secondary = styles.getPropertyValue('--secondary').trim();
    if($('#sw1')) $('#sw1').style.background = gold;
    if($('#sw2')) $('#sw2').style.background = accent;
    if($('#sw3')) $('#sw3').style.background = secondary;
  }

  /* ===== Cart count (nếu có dùng cart.html) ===== */
  function getCart(){
    try{ return JSON.parse(localStorage.getItem('cart')||'[]'); }catch(e){ return []; }
  }
  function updateCartCount(){
    var c = getCart().reduce(function(s,it){ return s+it.qty; }, 0);
    var el = $('#cart-count'); if(el) el.textContent = c;
  }

  /* ===== Render product grid (defensive) ===== */
  function renderProductsGrid(container, filterCat){
    if(!container){ console.warn('[grid] container missing'); return; }
    var list = (window.PRODUCTS && Array.isArray(window.PRODUCTS)) ? window.PRODUCTS : [];
    if(list.length===0){
      container.innerHTML =
        '<div class="card" style="grid-column: span 12; padding:16px"><strong>Heads up:</strong> Không thấy dữ liệu sản phẩm. Kiểm tra <code>assets/products.js</code> và biến <code>window.PRODUCTS</code>.</div>';
      return;
    }
    var items = (filterCat && filterCat!=='All') ? list.filter(function(p){ return p.category===filterCat; }) : list;
    container.innerHTML = items.map(function(p){
      return (
        '<article class="card">' +
          '<a href="product.html?id=' + encodeURIComponent(p.id) + '">' +
            '<img src="' + p.image + '" alt="' + p.title.replace(/"/g,'&quot;') + '">' +
          '</a>' +
          '<div class="info">' +
            '<div class="badge">' + p.category + '</div>' +
            '<h3 style="margin:0 0 6px">' + p.title + '</h3>' +
            '<p class="meta" style="margin:0 0 10px">' + p.desc + '</p>' +
            '<div style="display:flex; align-items:center; justify-content:space-between">' +
              '<span class="price">$' + Number(p.price).toFixed(2) + '</span>' +
              '<a class="btn btn-primary" href="product.html?id=' + encodeURIComponent(p.id) + '">View</a>' +
            '</div>' +
          '</div>' +
        '</article>'
      );
    }).join('');
  }

  /* ===== Seasonal hero mapping (avoid optional chaining) ===== */
  var THEME = {
    "Wedding":  { cls:"season-wedding",  title:"Elegant Wedding Gifts",      sub:"Pearl whites, blush accents & gold details" },
    "Birthday": { cls:"season-birthday", title:"Birthday Celebration Gifts", sub:"Personalized resin charms & happy vibes" },
    "Christmas":{ cls:"season-christmas",title:"Christmas Holiday Gifts",    sub:"Cozy bundles, ornaments & winter sparkle" },
    "Summer":   { cls:"season-summer",   title:"Summer & Friendship Gifts",  sub:"Beachy colors, citrus fresh & sunny picks" },
    "All":      { cls:"",                title:"Premium Mini Gifts for Every Elegant Moment",
                                          sub:"Wedding • Birthday • Christmas • Summer — curated sets, boutique packaging." }
  };
  function setSeason(key){
    document.body.classList.remove('season-wedding','season-birthday','season-christmas','season-summer');
    var conf = THEME[key] || THEME["All"];
    if(conf.cls) document.body.classList.add(conf.cls);
    var t = $('#hero-title'), s = $('#hero-sub');
    if(t) t.textContent = conf.title;
    if(s) s.textContent = conf.sub;
  }

  /* ===== Boot ===== */
  document.addEventListener('DOMContentLoaded', function(){
    // Quick diagnostics
    if(!window.PRODUCTS){ console.error('[products.js] window.PRODUCTS is undefined. Kiểm tra đường dẫn: assets/products.js'); }
    setTheme();            // restore Romantic/Classic
    updateCartCount();     // render cart count
    renderProductsGrid($('#grid-all')); // all products

    // filter buttons => grid + hero season
    $$('.filter .chip').forEach(function(btn){
      btn.addEventListener('click', function(){
        $$('.filter .chip').forEach(function(b){ b.classList.remove('active'); });
        btn.classList.add('active');
        var cat = btn.dataset.cat;
        renderProductsGrid($('#grid-all'), cat);
        setSeason(cat || 'All');
      });
    });

    // theme chips
    $$('.tools .chip[data-theme]').forEach(function(btn){
      btn.addEventListener('click', function(){ setTheme('theme-'+btn.dataset.theme); });
    });

    // default season (All)
    setSeason('All');
  });
</script>

</body>
</html>
